<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‚ö° AI Content & Image Generator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9fafb; margin: 20px; }
    h1 { color: #2563eb; }
    .container { max-width: 900px; margin: auto; }
    .card { background: #fff; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    select, input, button { width: 100%; padding: 10px; margin-bottom: 15px; border-radius: 6px; border: 1px solid #ccc; }
    button { cursor: pointer; background: #2563eb; color: #fff; font-weight: bold; border: none; }
    button:hover { background: #1e40af; }

    .status { padding: 10px; border-radius: 6px; margin-top: 10px; text-align: center; font-weight: bold; }
    .green { background: #d1fae5; color: #065f46; }
    .red { background: #fee2e2; color: #991b1b; }
    .orange { background: #ffedd5; color: #9a3412; }

    /* Progress Bar */
    .progress-container { width: 100%; background: #e5e7eb; border-radius: 8px; overflow: hidden; margin-top: 10px; display: none; }
    .progress-bar { height: 20px; width: 0%; background: linear-gradient(90deg, #2563eb, #3b82f6); text-align: center; color: #fff; font-size: 12px; font-weight: bold; line-height: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚ú® AI Content & Image Generator</h1>

    <div class="card">
      <label>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (Topic):</label>
      <input id="topic" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏•‡∏¢, ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô..." />

      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5):</label>
      <input id="num" type="number" min="1" max="5" value="1" />

      <label>‡πÇ‡∏´‡∏°‡∏î:</label>
      <select id="mode">
        <option value="text">Text (‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå)</option>
        <option value="image">Image (‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö)</option>
      </select>

      <label>‡πÇ‡∏°‡πÄ‡∏î‡∏•:</label>
      <select id="model">
        <option>Gemini 2.0 Flash ‚ö°</option>
        <option>Gemini 1.5 Pro</option>
        <option>Gemini 1.5 Flash</option>
      </select>

      <label>‡πÇ‡∏ó‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°/‡∏†‡∏≤‡∏û:</label>
      <select id="tone">
        <option>‡πÅ‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ üìò</option>
        <option>‡πÅ‡∏ô‡∏ß‡∏™‡∏ô‡∏∏‡∏Å ‡∏ï‡∏•‡∏Å‡∏Ç‡∏≥‡πÜ üòÇ</option>
        <option>‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ üèõÔ∏è</option>
        <option>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏£‡∏á‡∏ö‡∏±‡∏ô‡∏î‡∏≤‡∏•‡πÉ‡∏à ‚ú®</option>
      </select>

      <label>‡∏†‡∏≤‡∏©‡∏≤:</label>
      <select id="lang">
        <option>‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ TH</option>
        <option>English</option>
      </select>

      <label>‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°:</label>
      <select id="platform">
        <option>Facebook</option>
        <option>Instagram</option>
        <option>Twitter (X)</option>
      </select>

      <button onclick="generateContent()">Generate Content</button>
    </div>

    <div class="card">
      <h3>üñ•Ô∏è Server Status</h3>
      <button style="background:#16a34a;" onclick="wakeServer()">Wake Server</button>
      <div id="serverStatus" class="status red">üî¥ Server ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà</div>

      <div class="progress-container" id="progressContainer">
        <div class="progress-bar" id="progressBar">0%</div>
      </div>
    </div>
  </div>

  <script>
    const API_URL = "https://fb-proxy-m63e.onrender.com"; // proxy URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

    async function checkStatus() {
      try {
        const res = await fetch(API_URL + "/");
        if (res.ok) {
          document.getElementById("serverStatus").className = "status green";
          document.getElementById("serverStatus").innerText = "üü¢ Server ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô";
          document.getElementById("progressContainer").style.display = "none";
        } else {
          document.getElementById("serverStatus").className = "status red";
          document.getElementById("serverStatus").innerText = "üî¥ Server ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà";
        }
      } catch {
        document.getElementById("serverStatus").className = "status red";
        document.getElementById("serverStatus").innerText = "üî¥ Server ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà";
      }
    }

    async function wakeServer() {
      const statusBox = document.getElementById("serverStatus");
      const progressContainer = document.getElementById("progressContainer");
      const progressBar = document.getElementById("progressBar");

      statusBox.className = "status orange";
      statusBox.innerText = "üü† ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏•‡∏∏‡∏Å Server...";

      progressContainer.style.display = "block";
      progressBar.style.width = "0%";
      progressBar.innerText = "0%";

      // ‡∏¢‡∏¥‡∏á request ‡πÑ‡∏õ‡∏õ‡∏•‡∏∏‡∏Å
      fetch(API_URL + "/").catch(() => {});

      let progress = 0;
      const interval = setInterval(() => {
        progress += 5;
        if (progress > 100) progress = 100;
        progressBar.style.width = progress + "%";
        progressBar.innerText = progress + "%";
      }, 1500);

      // ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ status ‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥
      let retries = 0;
      const checkInterval = setInterval(async () => {
        retries++;
        try {
          const res = await fetch(API_URL + "/");
          if (res.ok) {
            clearInterval(interval);
            clearInterval(checkInterval);
            progressBar.style.width = "100%";
            progressBar.innerText = "100%";
            statusBox.className = "status green";
            statusBox.innerText = "üü¢ Server ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô";
          }
        } catch (e) {}
        if (retries > 6) { // ‡∏£‡∏≠‡∏£‡∏ß‡∏° ~1 ‡∏ô‡∏≤‡∏ó‡∏µ
          clearInterval(interval);
          clearInterval(checkInterval);
          statusBox.className = "status red";
          statusBox.innerText = "üî¥ Server ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏∑‡πà‡∏ô (‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á)";
        }
      }, 10000);
    }

    function generateContent() {
      alert("üöÄ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Content");
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≤ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ server ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    checkStatus();
  </script>
</body>
</html>
